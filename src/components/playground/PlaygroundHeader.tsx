import { Button } from "@/components/button/Button";
import { LoadingSVG } from "@/components/button/LoadingSVG";
import { SettingsDropdown } from "@/components/playground/SettingsDropdown";
import { useConfig } from "@/hooks/useConfig";
import { ConnectionState } from "livekit-client";
import { ReactNode } from "react";

type PlaygroundHeader = {
  logo?: ReactNode;
  title?: ReactNode;
  githubLink?: string;
  height: number;
  accentColor: string;
  connectionState: ConnectionState;
  onConnectClicked: () => void;
};

export const PlaygroundHeader = ({
  logo,
  title,
  githubLink,
  accentColor,
  height,
  onConnectClicked,
  connectionState,
}: PlaygroundHeader) => {
  const { config } = useConfig();
  return (
    <div
      className={`flex gap-4 pt-4 text-${accentColor}-500 justify-between items-center shrink-0`}
      style={{
        height: height + "px",
      }}
    >
      <div className="flex items-center gap-3 basis-2/3">
        <div className="flex lg:basis-1/2">
          {logo ?? <LKLogo />}</a>
        </div>
        <div className="lg:basis-1/2 lg:text-center text-xs lg:text-base lg:font-semibold text-white">
          {title}
        </div>
      </div>
      <div className="flex basis-1/3 justify-end items-center gap-2">
        {githubLink && (
          <a
            href={githubLink}
            target="_blank"
            className={`text-white hover:text-white/80`}
          >
            <GithubSVG />
          </a>
        )}
        {config.settings.editable && <SettingsDropdown />}
        <Button
          accentColor={
            connectionState === ConnectionState.Connected ? "red" : accentColor
          }
          disabled={connectionState === ConnectionState.Connecting}
          onClick={() => {
            onConnectClicked();
          }}
        >
          {connectionState === ConnectionState.Connecting ? (
            <LoadingSVG />
          ) : connectionState === ConnectionState.Connected ? (
            "Disconnect"
          ) : (
            "Connect"
          )}
        </Button>
      </div>
    </div>
  );
};

const LKLogo = () => (
<svg id="_图层_2" data-name="图层 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 25.09">
  <defs>
    <style>
      .cls-1 {
        fill: #000;
      }

      .cls-1, .cls-2, .cls-3, .cls-4, .cls-5 {
        stroke-width: 0px;
      }

      .cls-2 {
        fill: blue;
      }

      .cls-3 {
        fill: aqua;
      }

      .cls-4 {
        fill: #ed1c24;
      }

      .cls-5 {
        fill: #f0f;
      }
    </style>
  </defs>
  <g id="_图层_1-2" data-name="图层 1">
    <g>
      <g>
        <rect class="cls-4" x="13.26" width=".51" height=".51"/>
        <rect class="cls-4" x="16.07" y=".89" width="1.02" height=".51"/>
        <rect class="cls-4" x="14.79" y="3.63" width="2.55" height=".51"/>
        <rect class="cls-4" x="5.32" y="18.11" width="3.06" height=".51"/>
        <rect class="cls-4" x="8.56" y="1.82" width="3.55" height=".51"/>
        <rect class="cls-4" x="22.07" y="14.82" width="4.59" height=".51"/>
        <polygon class="cls-4" points="25.86 11.15 25.86 9.21 29.72 9.21 29.72 8.7 25.86 8.7 25.86 6.02 24.77 6.02 24.77 4.93 22.59 4.93 22.59 3.84 20.4 3.84 20.4 4.93 19.31 4.93 19.31 6.02 18.21 6.02 18.21 7.11 17.12 7.11 17.12 8.2 16.03 8.2 16.03 7.11 14.94 7.11 14.94 6.02 13.84 6.02 13.84 5.63 18.1 5.63 18.1 5.12 13.84 5.12 13.84 4.93 12.75 4.93 12.75 3.84 10.56 3.84 10.56 4.93 8.38 4.93 8.38 6.02 7.29 6.02 7.29 6.4 3.21 6.4 3.21 6.91 7.29 6.91 7.29 9.29 1.17 9.29 1.17 9.8 7.29 9.8 7.29 10.9 4.74 10.9 4.74 11.41 7.29 11.41 7.29 11.48 8.38 11.48 8.38 12.57 9.47 12.57 9.47 13.66 10.56 13.66 10.56 14.75 11.66 14.75 11.66 14.82 8.93 14.82 8.93 15.33 11.66 15.33 11.66 15.85 12.75 15.85 12.75 16.94 13.84 16.94 13.84 17.6 12.75 17.6 12.75 18.11 14.28 18.11 14.28 18.03 14.94 18.03 14.94 19.12 16.03 19.12 16.03 20.21 17.12 20.21 17.12 19.12 18.21 19.12 18.21 18.11 20.15 18.11 20.15 17.6 19.31 17.6 19.31 16.94 20.4 16.94 20.4 15.85 21.49 15.85 21.49 14.75 22.59 14.75 22.59 13.66 23.68 13.66 23.68 12.57 24.77 12.57 24.77 11.66 29.96 11.66 29.96 11.15 25.86 11.15"/>
        <rect class="cls-4" x="19.57" y="1.56" width="7.63" height=".51"/>
      </g>
      <g>
        <rect class="cls-3" x="7.53" y="19.96" width=".51" height=".51"/>
        <rect class="cls-3" x="15.56" y="24.58" width="1.02" height=".51"/>
        <rect class="cls-3" x="11.73" y="23.46" width="1.53" height=".51"/>
        <rect class="cls-3" x="17.64" y="2.61" width="2.04" height=".51"/>
        <rect class="cls-3" x="5.51" y="3.58" width="5.1" height=".51"/>
        <rect class="cls-3" x="4.99" y="0" width="5.59" height=".51"/>
        <polygon class="cls-3" points="28.18 8.7 23.68 8.7 23.68 8.2 22.58 8.2 22.58 7.11 20.4 7.11 20.4 6.02 18.21 6.02 18.21 7.11 17.12 7.11 17.12 8.2 16.03 8.2 16.03 9.3 14.94 9.3 14.94 10.39 13.84 10.39 13.84 9.3 12.75 9.3 12.75 8.2 11.66 8.2 11.66 7.42 13.14 7.42 13.14 6.91 10.56 6.91 10.56 6.02 8.38 6.02 8.38 7.11 6.19 7.11 6.19 7.93 0 7.93 0 8.44 5.1 8.44 5.1 10.13 2.34 10.13 2.34 10.64 5.1 10.64 5.1 13.66 6.19 13.66 6.19 14.56 2.8 14.56 2.8 15.07 7.29 15.07 7.29 15.85 8.38 15.85 8.38 16.94 9.47 16.94 9.47 17.85 7.14 17.85 7.14 18.36 10.56 18.36 10.56 19.12 11.66 19.12 11.66 19.38 9.33 19.38 9.33 19.89 11.66 19.89 11.66 20.22 12.75 20.22 12.75 20.66 8.57 20.66 8.57 21.17 12.75 21.17 12.75 21.31 13.84 21.31 13.84 21.93 6.26 21.93 6.26 22.44 14.42 22.44 14.42 22.4 14.94 22.4 14.94 21.31 16.03 21.31 16.03 20.22 17.12 20.22 17.12 19.12 18.21 19.12 18.21 18.03 19.31 18.03 19.31 16.94 20.4 16.94 20.4 15.85 21.49 15.85 21.49 15.33 23.65 15.33 23.65 14.82 21.49 14.82 21.49 14.76 22.58 14.76 22.58 13.66 23.68 13.66 23.68 9.21 28.18 9.21 28.18 8.7"/>
      </g>
      <g>
        <path class="cls-2" d="M25.86,13.7h.29v-.51h-.29v-2.8h-1.09v-.34h1.63v-.51h-1.63v-.25h-2.19v-1.09h-5.55v.51h3.36v.58h-1.09v1.09h-.45s-5.01,0-5.01,0v-1.09h-1.09v-1.09H4.74v.51h5.82v.58h-2.19v1.09h-1.09v1.13H3.02s0,.51,0,.51h4.26s0,2.8,0,2.8h-2.1v.51h2.1s0,.51,0,.51h1.09v.73h-1.24v.51h2.33v.94h1.09v1.09h1.09v1.02h-1.97v.51h3.06v.65h1.09v1.09h1.09v1.09h1.09v1.09h1.09v-1.09h1.09v-1.09h1.09v-1.09h1.09v-1.09h1.09v-.58h5.5v-.51h-5.5s1.09,0,1.09,0v-1.09h1.09v-1.09h1.09v-1.09h1.09v-.51h1.82s0-.51,0-.51h-1.82s0-1.12,0-1.12ZM17.12,11.48v1.09h-1.09v-1.09h-1.09v-.58h3.28v.58h-1.09Z"/>
        <rect class="cls-2" x="27.68" y="6.91" width=".51" height=".51"/>
        <rect class="cls-2" x="26.92" y="11.52" width="1.02" height=".51"/>
        <rect class="cls-2" x="8.06" y="7.68" width="3.55" height=".51"/>
        <rect class="cls-2" x="21.17" y="7.17" width="4.08" height=".51"/>
        <rect class="cls-2" x="12.5" y="6.02" width="8.16" height=".51"/>
      </g>
      <g>
        <rect class="cls-5" x="27.43" y="16.07" width=".51" height=".51"/>
        <rect class="cls-5" x="8.42" y="8.7" width="1.02" height=".51"/>
        <rect class="cls-5" x="18.06" y="6.66" width="1.53" height=".51"/>
        <rect class="cls-5" x="19.13" y="3.38" width="2.04" height=".51"/>
        <rect class="cls-5" x="22.59" y="4.86" width="3.55" height=".51"/>
        <rect class="cls-5" x="10.2" y="2.87" width="4.59" height=".51"/>
        <path class="cls-5" d="M32,10.73h-3.95s0-2.53,0-2.53h-1.09v-.02h2.51v-.51h-2.51v-.56h-2.19v-1.09h-2.19v1.09h-1.09v1.09h-1.09v.49h-3.28v-.49h-1.09v-1.09h-1.09v-1.09h-2.19v1.09h-.51v-.2h-4.08v.51h2.4v.78h-1.09v3.57h-4.15v.51h4.15v1.38h1.09v.55h-1.38v.51h1.38v.04h1.09v1.09h1.09v.73h-4.34s0,.51,0,.51h5.43v.94h1.09v.12h-2.01v.51h2.01v.46h1.09v1.09h1.09v.19h-3.72v.51h3.72s0,.4,0,.4h1.09v1.09h1.09v-1.09h1.09v-.4h.14v-.51h-.14v-.19h1.09v-1.09h1.09v-.2h3.68s0-.51,0-.51h-3.68v-.38h1.09v-1.09h1.09v-1.09h1.09v-1.09h1.09v-1.09h1.09v-2.42h3.95v-.51ZM20.4,9.21v.09h-1.09v1.09h-1.09v-1.09h-1.09v-.09h3.28Z"/>
      </g>
      <g>
        <rect class="cls-1" x="17.29" y="2.87" width=".51" height=".51"/>
        <rect class="cls-1" x="17.8" y="5.12" width="1.02" height=".51"/>
        <rect class="cls-1" x="4.99" y="16.32" width="1.53" height=".51"/>
        <rect class="cls-1" x="27.57" y="12.68" width="2.04" height=".51"/>
        <rect class="cls-1" x="7.29" y="4.86" width="2.55" height=".51"/>
        <polygon class="cls-1" points="25.86 8.94 25.86 8.2 24.77 8.2 24.77 7.15 26.62 7.15 26.62 6.65 22.59 6.65 22.59 6.02 20.4 6.02 20.4 7.11 19.31 7.11 19.31 8.2 18.21 8.2 18.21 9.3 17.12 9.3 17.12 10.39 16.03 10.39 16.03 9.3 14.94 9.3 14.94 8.2 13.84 8.2 13.84 7.66 17.8 7.66 17.8 7.15 13.84 7.15 13.84 7.11 12.75 7.11 12.75 6.02 10.56 6.02 10.56 7.11 8.38 7.11 8.38 8.2 7.29 8.2 7.29 10.72 4.99 10.72 4.99 11.23 7.29 11.23 7.29 13.52 2.19 13.52 2.19 14.03 8.38 14.03 8.38 14.76 9.47 14.76 9.47 15.07 7.48 15.07 7.48 15.58 9.47 15.58 9.47 15.85 10.56 15.85 10.56 16.94 11.66 16.94 11.66 18.03 12.75 18.03 12.75 18.36 7.29 18.36 7.29 18.87 12.75 18.87 12.75 19.12 13.84 19.12 13.84 20.22 14.94 20.22 14.94 21.31 15.69 21.31 15.69 21.42 16.03 21.42 16.03 22.4 17.12 22.4 17.12 21.42 23.33 21.42 23.33 20.91 18.21 20.91 18.21 20.22 19.31 20.22 19.31 19.12 20.4 19.12 20.4 18.03 21.49 18.03 21.49 17.45 26.77 17.45 26.77 16.94 22.59 16.94 22.59 15.85 23.68 15.85 23.68 15.32 27.84 15.32 27.84 14.81 23.68 14.81 23.68 14.76 24.77 14.76 24.77 13.66 25.86 13.66 25.86 12.03 28.55 12.03 28.55 11.52 25.86 11.52 25.86 9.45 31.76 9.45 31.76 8.94 25.86 8.94"/>
      </g>
    </g>
  </g>
</svg>
);

const GithubSVG = () => (
  <svg
    width="24"
    height="24"
    viewBox="0 0 98 96"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"
      fill="currentColor"
    />
  </svg>
);
